## JPA

실제로 엔티티로 조회할 것인지  
DTO로 조회할 것인지 판단에 대한 여부가 사실 많이 어렵다  
<br>
그래서 판단에 대한 기준점이 있는데,  

### DB 조회 성능 최적화

1. 엔티티 조회 방식으로 우선 접근
   1. `fetch join` 으로 쿼리수를 최적화
   2. 컬렉션 최적화 (oneToMany)
      1. 페이징이 필요하면, `hibernate.default_batch_fetch_size` , `@BatchSize` 로 최적화
      2. 페이징이 필요하지 않으면, `fetch join` 사용
2. 엔티티 조회방식으로 해결이 안되면, DTO 조회 방식 사용
3. DTO 조회 방식으로 해결이 안되면, NativeSQL / Jdbc 사용

엔티티를 통해서 바로 조회하는 것은, 유지보수에 끼치는 영향력이 매우 작지만 성능을 조금 포기해야 될 수도 있다  
> 대부분 JPA가 해결해주는 경우가 엄~청 많음

반대로 DTO를 통해서 바로 조회하는 것은, 유지보수에는 많이 신경을 써야 하지만(DTO가 바뀌면 쿼리 쓰는 것도 바뀜)
> SQL을 직접 다루는 방식과 유사하다
> 
성능상의 이점을 많이 챙길 때가 많다 (N + 1 문제를 해결할 수 있기 떄문)  
<br>
**그러니까 이 두가지의 선택의 갈림길에서 적당한 줄타기가 필요하다**  


